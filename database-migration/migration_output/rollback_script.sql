-- ========================================
-- SCRIPT DE ROLLBACK
-- Generado automáticamente
-- ========================================

BEGIN;

-- ELIMINAR TRIGGERS
DROP TRIGGER IF EXISTS trigger_create_contadores_on_new_subscription ON suscripciones;
DROP TRIGGER IF EXISTS trigger_update_contadores_on_plan_change ON suscripciones;

-- ELIMINAR FUNCIONES
DROP FUNCTION IF EXISTS public.update_contadores_on_plan_change;

-- ELIMINAR ÍNDICES
DROP INDEX IF EXISTS public.contadores_uso_id_restaurante_recurso_fecha_medicion_key;
DROP INDEX IF EXISTS public.contadores_uso_pkey;

-- ELIMINAR RESTRICCIONES
ALTER TABLE public.admin_users DROP CONSTRAINT IF EXISTS 2200_90989_1_not_null;
ALTER TABLE public.admin_users DROP CONSTRAINT IF EXISTS 2200_90989_2_not_null;
ALTER TABLE public.admin_users DROP CONSTRAINT IF EXISTS 2200_90989_3_not_null;
ALTER TABLE public.admin_users DROP CONSTRAINT IF EXISTS 2200_90989_4_not_null;
ALTER TABLE public.alertas_inventario DROP CONSTRAINT IF EXISTS 2200_99682_10_not_null;
ALTER TABLE public.alertas_inventario DROP CONSTRAINT IF EXISTS 2200_99682_1_not_null;
ALTER TABLE public.alertas_inventario DROP CONSTRAINT IF EXISTS 2200_99682_2_not_null;
ALTER TABLE public.alertas_inventario DROP CONSTRAINT IF EXISTS 2200_99682_4_not_null;
ALTER TABLE public.alertas_inventario DROP CONSTRAINT IF EXISTS 2200_99682_5_not_null;
ALTER TABLE public.alertas_inventario DROP CONSTRAINT IF EXISTS 2200_99682_6_not_null;
ALTER TABLE public.alertas_limites DROP CONSTRAINT IF EXISTS 2200_119180_1_not_null;
ALTER TABLE public.alertas_limites DROP CONSTRAINT IF EXISTS 2200_119180_2_not_null;
ALTER TABLE public.alertas_limites DROP CONSTRAINT IF EXISTS 2200_119180_3_not_null;
ALTER TABLE public.alertas_limites DROP CONSTRAINT IF EXISTS 2200_119180_4_not_null;
ALTER TABLE public.alertas_limites DROP CONSTRAINT IF EXISTS 2200_119180_5_not_null;
ALTER TABLE public.alertas_limites DROP CONSTRAINT IF EXISTS 2200_119180_6_not_null;
ALTER TABLE public.alertas_limites DROP CONSTRAINT IF EXISTS 2200_119180_7_not_null;
ALTER TABLE public.alertas_limites DROP CONSTRAINT IF EXISTS 2200_119180_8_not_null;
ALTER TABLE public.archivos_egresos DROP CONSTRAINT IF EXISTS 2200_100181_1_not_null;
ALTER TABLE public.archivos_egresos DROP CONSTRAINT IF EXISTS 2200_100181_2_not_null;
ALTER TABLE public.archivos_egresos DROP CONSTRAINT IF EXISTS 2200_100181_3_not_null;
ALTER TABLE public.archivos_egresos DROP CONSTRAINT IF EXISTS 2200_100181_4_not_null;
ALTER TABLE public.archivos_egresos DROP CONSTRAINT IF EXISTS 2200_100181_7_not_null;
ALTER TABLE public.arqueos_caja DROP CONSTRAINT IF EXISTS 2200_99638_10_not_null;
ALTER TABLE public.arqueos_caja DROP CONSTRAINT IF EXISTS 2200_99638_1_not_null;
ALTER TABLE public.arqueos_caja DROP CONSTRAINT IF EXISTS 2200_99638_2_not_null;
ALTER TABLE public.arqueos_caja DROP CONSTRAINT IF EXISTS 2200_99638_5_not_null;
ALTER TABLE public.arqueos_caja DROP CONSTRAINT IF EXISTS 2200_99638_6_not_null;
ALTER TABLE public.auditoria_admin DROP CONSTRAINT IF EXISTS 2200_90947_1_not_null;
ALTER TABLE public.auditoria_planes DROP CONSTRAINT IF EXISTS 2200_119147_1_not_null;
ALTER TABLE public.auditoria_planes DROP CONSTRAINT IF EXISTS 2200_119147_2_not_null;
ALTER TABLE public.auditoria_planes DROP CONSTRAINT IF EXISTS 2200_119147_4_not_null;
ALTER TABLE public.auditoria_planes DROP CONSTRAINT IF EXISTS 2200_119147_5_not_null;
ALTER TABLE public.auditoria_pos DROP CONSTRAINT IF EXISTS 2200_99591_1_not_null;
ALTER TABLE public.auditoria_pos DROP CONSTRAINT IF EXISTS 2200_99591_3_not_null;
ALTER TABLE public.auditoria_pos DROP CONSTRAINT IF EXISTS 2200_99591_4_not_null;
ALTER TABLE public.auditoria_pos DROP CONSTRAINT IF EXISTS 2200_99591_8_not_null;
ALTER TABLE public.casos_exito DROP CONSTRAINT IF EXISTS 2200_102600_1_not_null;
ALTER TABLE public.casos_exito DROP CONSTRAINT IF EXISTS 2200_102600_2_not_null;
ALTER TABLE public.categorias DROP CONSTRAINT IF EXISTS 2200_90502_1_not_null;
ALTER TABLE public.categorias DROP CONSTRAINT IF EXISTS 2200_90502_2_not_null;
ALTER TABLE public.categorias DROP CONSTRAINT IF EXISTS 2200_90502_5_not_null;
ALTER TABLE public.categorias_almacen DROP CONSTRAINT IF EXISTS 2200_99668_1_not_null;
ALTER TABLE public.categorias_almacen DROP CONSTRAINT IF EXISTS 2200_99668_2_not_null;
ALTER TABLE public.categorias_almacen DROP CONSTRAINT IF EXISTS 2200_99668_4_not_null;
ALTER TABLE public.categorias_almacen DROP CONSTRAINT IF EXISTS 2200_99668_7_not_null;
ALTER TABLE public.categorias_egresos DROP CONSTRAINT IF EXISTS 2200_100066_1_not_null;
ALTER TABLE public.categorias_egresos DROP CONSTRAINT IF EXISTS 2200_100066_2_not_null;
ALTER TABLE public.categorias_egresos DROP CONSTRAINT IF EXISTS 2200_100066_7_not_null;
ALTER TABLE public.clientes DROP CONSTRAINT IF EXISTS 2200_90508_1_not_null;
ALTER TABLE public.configuracion_web DROP CONSTRAINT IF EXISTS 2200_102668_1_not_null;
ALTER TABLE public.configuracion_web DROP CONSTRAINT IF EXISTS 2200_102668_2_not_null;
ALTER TABLE public.configuraciones_restaurante DROP CONSTRAINT IF EXISTS 2200_99616_1_not_null;
ALTER TABLE public.configuraciones_restaurante DROP CONSTRAINT IF EXISTS 2200_99616_2_not_null;
ALTER TABLE public.configuraciones_restaurante DROP CONSTRAINT IF EXISTS 2200_99616_3_not_null;
ALTER TABLE public.configuraciones_restaurante DROP CONSTRAINT IF EXISTS 2200_99616_4_not_null;
ALTER TABLE public.configuraciones_sistema DROP CONSTRAINT IF EXISTS 2200_99626_1_not_null;
ALTER TABLE public.configuraciones_sistema DROP CONSTRAINT IF EXISTS 2200_99626_2_not_null;
ALTER TABLE public.contadores_uso DROP CONSTRAINT IF EXISTS 2200_143516_1_not_null;
ALTER TABLE public.contadores_uso DROP CONSTRAINT IF EXISTS 2200_143516_2_not_null;
ALTER TABLE public.contadores_uso DROP CONSTRAINT IF EXISTS 2200_143516_3_not_null;
ALTER TABLE public.contadores_uso DROP CONSTRAINT IF EXISTS 2200_143516_4_not_null;
ALTER TABLE public.contadores_uso DROP CONSTRAINT IF EXISTS 2200_143516_6_not_null;
ALTER TABLE public.contadores_uso DROP CONSTRAINT IF EXISTS contadores_uso_id_plan_fkey;
ALTER TABLE public.contadores_uso DROP CONSTRAINT IF EXISTS contadores_uso_id_restaurante_recurso_fecha_medicion_key;
ALTER TABLE public.contadores_uso DROP CONSTRAINT IF EXISTS contadores_uso_pkey;
ALTER TABLE public.contenido_web DROP CONSTRAINT IF EXISTS 2200_102644_1_not_null;
ALTER TABLE public.contenido_web DROP CONSTRAINT IF EXISTS 2200_102644_2_not_null;
ALTER TABLE public.contenido_web DROP CONSTRAINT IF EXISTS 2200_102644_3_not_null;
ALTER TABLE public.conversion_events DROP CONSTRAINT IF EXISTS 2200_138759_1_not_null;
ALTER TABLE public.conversion_events DROP CONSTRAINT IF EXISTS 2200_138759_2_not_null;
ALTER TABLE public.conversion_events DROP CONSTRAINT IF EXISTS 2200_138759_3_not_null;
ALTER TABLE public.demos_reuniones DROP CONSTRAINT IF EXISTS 2200_102582_1_not_null;
ALTER TABLE public.demos_reuniones DROP CONSTRAINT IF EXISTS 2200_102582_4_not_null;
ALTER TABLE public.detalle_ventas DROP CONSTRAINT IF EXISTS 2200_90513_1_not_null;
ALTER TABLE public.detalle_ventas DROP CONSTRAINT IF EXISTS 2200_90513_4_not_null;
ALTER TABLE public.detalle_ventas DROP CONSTRAINT IF EXISTS 2200_90513_5_not_null;
ALTER TABLE public.detalle_ventas DROP CONSTRAINT IF EXISTS 2200_90513_9_not_null;
ALTER TABLE public.detalle_ventas_modificadores DROP CONSTRAINT IF EXISTS 2200_99302_1_not_null;
ALTER TABLE public.detalle_ventas_modificadores DROP CONSTRAINT IF EXISTS 2200_99302_2_not_null;
ALTER TABLE public.dim_tiempo DROP CONSTRAINT IF EXISTS 2200_90523_1_not_null;
ALTER TABLE public.dim_tiempo DROP CONSTRAINT IF EXISTS 2200_90523_2_not_null;
ALTER TABLE public.dim_tiempo DROP CONSTRAINT IF EXISTS 2200_90523_3_not_null;
ALTER TABLE public.dim_tiempo DROP CONSTRAINT IF EXISTS 2200_90523_4_not_null;
ALTER TABLE public.dim_tiempo DROP CONSTRAINT IF EXISTS 2200_90523_5_not_null;
ALTER TABLE public.dim_tiempo DROP CONSTRAINT IF EXISTS 2200_90523_6_not_null;
ALTER TABLE public.dim_tiempo DROP CONSTRAINT IF EXISTS 2200_90523_7_not_null;
ALTER TABLE public.dim_tiempo DROP CONSTRAINT IF EXISTS 2200_90523_8_not_null;
ALTER TABLE public.dim_tiempo DROP CONSTRAINT IF EXISTS 2200_90523_9_not_null;
ALTER TABLE public.egresos DROP CONSTRAINT IF EXISTS 2200_100087_1_not_null;
ALTER TABLE public.egresos DROP CONSTRAINT IF EXISTS 2200_100087_27_not_null;
ALTER TABLE public.egresos DROP CONSTRAINT IF EXISTS 2200_100087_28_not_null;
ALTER TABLE public.egresos DROP CONSTRAINT IF EXISTS 2200_100087_29_not_null;
ALTER TABLE public.egresos DROP CONSTRAINT IF EXISTS 2200_100087_2_not_null;
ALTER TABLE public.egresos DROP CONSTRAINT IF EXISTS 2200_100087_4_not_null;
ALTER TABLE public.egresos DROP CONSTRAINT IF EXISTS 2200_100087_5_not_null;
ALTER TABLE public.egresos DROP CONSTRAINT IF EXISTS 2200_100087_6_not_null;
ALTER TABLE public.egresos DROP CONSTRAINT IF EXISTS 2200_100087_7_not_null;
ALTER TABLE public.facturas DROP CONSTRAINT IF EXISTS 2200_90528_1_not_null;
ALTER TABLE public.facturas DROP CONSTRAINT IF EXISTS 2200_90528_2_not_null;
ALTER TABLE public.flujo_aprobaciones_egresos DROP CONSTRAINT IF EXISTS 2200_100160_1_not_null;
ALTER TABLE public.flujo_aprobaciones_egresos DROP CONSTRAINT IF EXISTS 2200_100160_2_not_null;
ALTER TABLE public.flujo_aprobaciones_egresos DROP CONSTRAINT IF EXISTS 2200_100160_3_not_null;
ALTER TABLE public.flujo_aprobaciones_egresos DROP CONSTRAINT IF EXISTS 2200_100160_4_not_null;
ALTER TABLE public.grupos_mesas DROP CONSTRAINT IF EXISTS 2200_91049_1_not_null;
ALTER TABLE public.grupos_mesas DROP CONSTRAINT IF EXISTS 2200_91049_2_not_null;
ALTER TABLE public.grupos_mesas DROP CONSTRAINT IF EXISTS 2200_91049_3_not_null;
ALTER TABLE public.grupos_mesas DROP CONSTRAINT IF EXISTS 2200_91049_5_not_null;
ALTER TABLE public.historial_pagos_diferidos DROP CONSTRAINT IF EXISTS 2200_111605_1_not_null;
ALTER TABLE public.historial_pagos_diferidos DROP CONSTRAINT IF EXISTS 2200_111605_2_not_null;
ALTER TABLE public.historial_pagos_diferidos DROP CONSTRAINT IF EXISTS 2200_111605_3_not_null;
ALTER TABLE public.historial_pagos_diferidos DROP CONSTRAINT IF EXISTS 2200_111605_4_not_null;
ALTER TABLE public.historial_pagos_diferidos DROP CONSTRAINT IF EXISTS 2200_111605_5_not_null;
ALTER TABLE public.historial_pagos_diferidos DROP CONSTRAINT IF EXISTS 2200_111605_7_not_null;
ALTER TABLE public.historial_pagos_diferidos DROP CONSTRAINT IF EXISTS 2200_111605_9_not_null;
ALTER TABLE public.integrity_logs DROP CONSTRAINT IF EXISTS 2200_99723_1_not_null;
ALTER TABLE public.integrity_logs DROP CONSTRAINT IF EXISTS 2200_99723_2_not_null;
ALTER TABLE public.integrity_logs DROP CONSTRAINT IF EXISTS 2200_99723_3_not_null;
ALTER TABLE public.inventario_lotes DROP CONSTRAINT IF EXISTS 2200_99652_10_not_null;
ALTER TABLE public.inventario_lotes DROP CONSTRAINT IF EXISTS 2200_99652_1_not_null;
ALTER TABLE public.inventario_lotes DROP CONSTRAINT IF EXISTS 2200_99652_2_not_null;
ALTER TABLE public.inventario_lotes DROP CONSTRAINT IF EXISTS 2200_99652_3_not_null;
ALTER TABLE public.inventario_lotes DROP CONSTRAINT IF EXISTS 2200_99652_4_not_null;
ALTER TABLE public.inventario_lotes DROP CONSTRAINT IF EXISTS 2200_99652_5_not_null;
ALTER TABLE public.leads_prospectos DROP CONSTRAINT IF EXISTS 2200_102563_1_not_null;
ALTER TABLE public.leads_prospectos DROP CONSTRAINT IF EXISTS 2200_102563_2_not_null;
ALTER TABLE public.leads_prospectos DROP CONSTRAINT IF EXISTS 2200_102563_3_not_null;
ALTER TABLE public.mesas DROP CONSTRAINT IF EXISTS 2200_90533_12_not_null;
ALTER TABLE public.mesas DROP CONSTRAINT IF EXISTS 2200_90533_1_not_null;
ALTER TABLE public.mesas DROP CONSTRAINT IF EXISTS 2200_90533_2_not_null;
ALTER TABLE public.mesas_en_grupo DROP CONSTRAINT IF EXISTS 2200_91071_1_not_null;
ALTER TABLE public.mesas_en_grupo DROP CONSTRAINT IF EXISTS 2200_91071_2_not_null;
ALTER TABLE public.mesas_en_grupo DROP CONSTRAINT IF EXISTS 2200_91071_3_not_null;
ALTER TABLE public.metodos_pago DROP CONSTRAINT IF EXISTS 2200_138462_1_not_null;
ALTER TABLE public.metodos_pago DROP CONSTRAINT IF EXISTS 2200_138462_2_not_null;
ALTER TABLE public.metodos_pago_backup DROP CONSTRAINT IF EXISTS 2200_90543_1_not_null;
ALTER TABLE public.metodos_pago_backup DROP CONSTRAINT IF EXISTS 2200_90543_2_not_null;
ALTER TABLE public.metodos_pago_backup DROP CONSTRAINT IF EXISTS 2200_90543_4_not_null;
ALTER TABLE public.metricas_web DROP CONSTRAINT IF EXISTS 2200_102659_1_not_null;
ALTER TABLE public.metricas_web DROP CONSTRAINT IF EXISTS 2200_102659_2_not_null;
ALTER TABLE public.migrations DROP CONSTRAINT IF EXISTS 2200_111651_1_not_null;
ALTER TABLE public.migrations DROP CONSTRAINT IF EXISTS 2200_111651_2_not_null;
ALTER TABLE public.movimientos_inventario DROP CONSTRAINT IF EXISTS 2200_90548_1_not_null;
ALTER TABLE public.movimientos_inventario DROP CONSTRAINT IF EXISTS 2200_90548_2_not_null;
ALTER TABLE public.movimientos_inventario DROP CONSTRAINT IF EXISTS 2200_90548_3_not_null;
ALTER TABLE public.movimientos_inventario DROP CONSTRAINT IF EXISTS 2200_90548_4_not_null;
ALTER TABLE public.movimientos_inventario DROP CONSTRAINT IF EXISTS 2200_90548_5_not_null;
ALTER TABLE public.movimientos_inventario DROP CONSTRAINT IF EXISTS 2200_90548_6_not_null;
ALTER TABLE public.movimientos_inventario DROP CONSTRAINT IF EXISTS 2200_90548_9_not_null;
ALTER TABLE public.newsletter_suscriptores DROP CONSTRAINT IF EXISTS 2200_138787_1_not_null;
ALTER TABLE public.newsletter_suscriptores DROP CONSTRAINT IF EXISTS 2200_138787_2_not_null;
ALTER TABLE public.pagos_diferidos DROP CONSTRAINT IF EXISTS 2200_111581_1_not_null;
ALTER TABLE public.pagos_diferidos DROP CONSTRAINT IF EXISTS 2200_111581_2_not_null;
ALTER TABLE public.pagos_diferidos DROP CONSTRAINT IF EXISTS 2200_111581_4_not_null;
ALTER TABLE public.pagos_diferidos DROP CONSTRAINT IF EXISTS 2200_111581_9_not_null;
ALTER TABLE public.pagos_restaurantes DROP CONSTRAINT IF EXISTS 2200_91001_1_not_null;
ALTER TABLE public.pagos_restaurantes DROP CONSTRAINT IF EXISTS 2200_91001_2_not_null;
ALTER TABLE public.pagos_restaurantes DROP CONSTRAINT IF EXISTS 2200_91001_3_not_null;
ALTER TABLE public.pagos_restaurantes DROP CONSTRAINT IF EXISTS 2200_91001_4_not_null;
ALTER TABLE public.planes DROP CONSTRAINT IF EXISTS 2200_119067_10_not_null;
ALTER TABLE public.planes DROP CONSTRAINT IF EXISTS 2200_119067_11_not_null;
ALTER TABLE public.planes DROP CONSTRAINT IF EXISTS 2200_119067_1_not_null;
ALTER TABLE public.planes DROP CONSTRAINT IF EXISTS 2200_119067_2_not_null;
ALTER TABLE public.planes DROP CONSTRAINT IF EXISTS 2200_119067_4_not_null;
ALTER TABLE public.planes DROP CONSTRAINT IF EXISTS 2200_119067_6_not_null;
ALTER TABLE public.planes DROP CONSTRAINT IF EXISTS 2200_119067_7_not_null;
ALTER TABLE public.planes DROP CONSTRAINT IF EXISTS 2200_119067_8_not_null;
ALTER TABLE public.planes DROP CONSTRAINT IF EXISTS 2200_119067_9_not_null;
ALTER TABLE public.planes_pos DROP CONSTRAINT IF EXISTS 2200_102543_1_not_null;
ALTER TABLE public.planes_pos DROP CONSTRAINT IF EXISTS 2200_102543_2_not_null;
ALTER TABLE public.prefacturas DROP CONSTRAINT IF EXISTS 2200_90553_10_not_null;
ALTER TABLE public.prefacturas DROP CONSTRAINT IF EXISTS 2200_90553_1_not_null;
ALTER TABLE public.presupuestos_egresos DROP CONSTRAINT IF EXISTS 2200_100134_1_not_null;
ALTER TABLE public.presupuestos_egresos DROP CONSTRAINT IF EXISTS 2200_100134_2_not_null;
ALTER TABLE public.presupuestos_egresos DROP CONSTRAINT IF EXISTS 2200_100134_4_not_null;
ALTER TABLE public.presupuestos_egresos DROP CONSTRAINT IF EXISTS 2200_100134_5_not_null;
ALTER TABLE public.presupuestos_egresos DROP CONSTRAINT IF EXISTS 2200_100134_8_not_null;
ALTER TABLE public.productos DROP CONSTRAINT IF EXISTS 2200_90564_1_not_null;
ALTER TABLE public.productos DROP CONSTRAINT IF EXISTS 2200_90564_2_not_null;
ALTER TABLE public.productos DROP CONSTRAINT IF EXISTS 2200_90564_3_not_null;
ALTER TABLE public.productos DROP CONSTRAINT IF EXISTS 2200_90564_9_not_null;
ALTER TABLE public.productos_modificadores DROP CONSTRAINT IF EXISTS 2200_99286_1_not_null;
ALTER TABLE public.productos_modificadores DROP CONSTRAINT IF EXISTS 2200_99286_2_not_null;
ALTER TABLE public.productos_modificadores DROP CONSTRAINT IF EXISTS 2200_99286_3_not_null;
ALTER TABLE public.promociones DROP CONSTRAINT IF EXISTS 2200_90575_10_not_null;
ALTER TABLE public.promociones DROP CONSTRAINT IF EXISTS 2200_90575_1_not_null;
ALTER TABLE public.promociones_sucursales DROP CONSTRAINT IF EXISTS 2200_99530_1_not_null;
ALTER TABLE public.promociones_sucursales DROP CONSTRAINT IF EXISTS 2200_99530_2_not_null;
ALTER TABLE public.promociones_sucursales DROP CONSTRAINT IF EXISTS 2200_99530_3_not_null;
ALTER TABLE public.reservas DROP CONSTRAINT IF EXISTS 2200_91079_10_not_null;
ALTER TABLE public.reservas DROP CONSTRAINT IF EXISTS 2200_91079_11_not_null;
ALTER TABLE public.reservas DROP CONSTRAINT IF EXISTS 2200_91079_12_not_null;
ALTER TABLE public.reservas DROP CONSTRAINT IF EXISTS 2200_91079_1_not_null;
ALTER TABLE public.reservas DROP CONSTRAINT IF EXISTS 2200_91079_2_not_null;
ALTER TABLE public.reservas DROP CONSTRAINT IF EXISTS 2200_91079_3_not_null;
ALTER TABLE public.reservas DROP CONSTRAINT IF EXISTS 2200_91079_6_not_null;
ALTER TABLE public.reservas DROP CONSTRAINT IF EXISTS 2200_91079_9_not_null;
ALTER TABLE public.restaurantes DROP CONSTRAINT IF EXISTS 2200_90751_1_not_null;
ALTER TABLE public.restaurantes DROP CONSTRAINT IF EXISTS 2200_90751_2_not_null;
ALTER TABLE public.roles_admin DROP CONSTRAINT IF EXISTS 2200_90930_1_not_null;
ALTER TABLE public.roles_admin DROP CONSTRAINT IF EXISTS 2200_90930_2_not_null;
ALTER TABLE public.servicios_restaurante DROP CONSTRAINT IF EXISTS 2200_90966_1_not_null;
ALTER TABLE public.servicios_restaurante DROP CONSTRAINT IF EXISTS 2200_90966_2_not_null;
ALTER TABLE public.servicios_restaurante DROP CONSTRAINT IF EXISTS 2200_90966_3_not_null;
ALTER TABLE public.servicios_restaurante DROP CONSTRAINT IF EXISTS 2200_90966_5_not_null;
ALTER TABLE public.servicios_restaurante DROP CONSTRAINT IF EXISTS 2200_90966_7_not_null;
ALTER TABLE public.solicitudes_demo DROP CONSTRAINT IF EXISTS 2200_138746_1_not_null;
ALTER TABLE public.solicitudes_demo DROP CONSTRAINT IF EXISTS 2200_138746_2_not_null;
ALTER TABLE public.solicitudes_demo DROP CONSTRAINT IF EXISTS 2200_138746_3_not_null;
ALTER TABLE public.solicitudes_demo DROP CONSTRAINT IF EXISTS 2200_138746_4_not_null;
ALTER TABLE public.solicitudes_demo DROP CONSTRAINT IF EXISTS 2200_138746_5_not_null;
ALTER TABLE public.soporte_tickets DROP CONSTRAINT IF EXISTS 2200_91028_1_not_null;
ALTER TABLE public.soporte_tickets DROP CONSTRAINT IF EXISTS 2200_91028_2_not_null;
ALTER TABLE public.soporte_tickets DROP CONSTRAINT IF EXISTS 2200_91028_3_not_null;
ALTER TABLE public.soporte_tickets DROP CONSTRAINT IF EXISTS 2200_91028_4_not_null;
ALTER TABLE public.soporte_tickets DROP CONSTRAINT IF EXISTS 2200_91028_5_not_null;
ALTER TABLE public.sucursales DROP CONSTRAINT IF EXISTS 2200_90581_1_not_null;
ALTER TABLE public.sucursales DROP CONSTRAINT IF EXISTS 2200_90581_2_not_null;
ALTER TABLE public.sucursales DROP CONSTRAINT IF EXISTS 2200_90581_3_not_null;
ALTER TABLE public.sucursales DROP CONSTRAINT IF EXISTS 2200_90581_7_not_null;
ALTER TABLE public.suscripciones DROP CONSTRAINT IF EXISTS 2200_119090_1_not_null;
ALTER TABLE public.suscripciones DROP CONSTRAINT IF EXISTS 2200_119090_2_not_null;
ALTER TABLE public.suscripciones DROP CONSTRAINT IF EXISTS 2200_119090_3_not_null;
ALTER TABLE public.suscripciones DROP CONSTRAINT IF EXISTS 2200_119090_5_not_null;
ALTER TABLE public.system_tasks DROP CONSTRAINT IF EXISTS 2200_99711_1_not_null;
ALTER TABLE public.system_tasks DROP CONSTRAINT IF EXISTS 2200_99711_2_not_null;
ALTER TABLE public.testimonios_web DROP CONSTRAINT IF EXISTS 2200_102615_1_not_null;
ALTER TABLE public.testimonios_web DROP CONSTRAINT IF EXISTS 2200_102615_2_not_null;
ALTER TABLE public.testimonios_web DROP CONSTRAINT IF EXISTS 2200_102615_6_not_null;
ALTER TABLE public.transferencias_almacen DROP CONSTRAINT IF EXISTS 2200_99693_11_not_null;
ALTER TABLE public.transferencias_almacen DROP CONSTRAINT IF EXISTS 2200_99693_1_not_null;
ALTER TABLE public.transferencias_almacen DROP CONSTRAINT IF EXISTS 2200_99693_2_not_null;
ALTER TABLE public.transferencias_almacen DROP CONSTRAINT IF EXISTS 2200_99693_4_not_null;
ALTER TABLE public.transferencias_almacen DROP CONSTRAINT IF EXISTS 2200_99693_5_not_null;
ALTER TABLE public.transferencias_almacen DROP CONSTRAINT IF EXISTS 2200_99693_6_not_null;
ALTER TABLE public.transferencias_almacen DROP CONSTRAINT IF EXISTS 2200_99693_8_not_null;
ALTER TABLE public.user_sessions DROP CONSTRAINT IF EXISTS 2200_138770_1_not_null;
ALTER TABLE public.user_sessions DROP CONSTRAINT IF EXISTS 2200_138770_2_not_null;
ALTER TABLE public.uso_recursos DROP CONSTRAINT IF EXISTS 2200_119118_10_not_null;
ALTER TABLE public.uso_recursos DROP CONSTRAINT IF EXISTS 2200_119118_1_not_null;
ALTER TABLE public.uso_recursos DROP CONSTRAINT IF EXISTS 2200_119118_2_not_null;
ALTER TABLE public.uso_recursos DROP CONSTRAINT IF EXISTS 2200_119118_3_not_null;
ALTER TABLE public.uso_recursos DROP CONSTRAINT IF EXISTS 2200_119118_9_not_null;
ALTER TABLE public.vendedores DROP CONSTRAINT IF EXISTS 2200_90589_10_not_null;
ALTER TABLE public.vendedores DROP CONSTRAINT IF EXISTS 2200_90589_1_not_null;
ALTER TABLE public.vendedores DROP CONSTRAINT IF EXISTS 2200_90589_2_not_null;
ALTER TABLE public.vendedores DROP CONSTRAINT IF EXISTS 2200_90589_3_not_null;
ALTER TABLE public.ventas DROP CONSTRAINT IF EXISTS 2200_90598_11_not_null;
ALTER TABLE public.ventas DROP CONSTRAINT IF EXISTS 2200_90598_1_not_null;

-- ELIMINAR COLUMNAS
ALTER TABLE public.alertas_limites DROP COLUMN IF EXISTS nivel_urgencia;
ALTER TABLE public.contadores_uso DROP COLUMN IF EXISTS id_contador;
ALTER TABLE public.contadores_uso DROP COLUMN IF EXISTS id_restaurante;
ALTER TABLE public.contadores_uso DROP COLUMN IF EXISTS id_plan;
ALTER TABLE public.contadores_uso DROP COLUMN IF EXISTS recurso;
ALTER TABLE public.contadores_uso DROP COLUMN IF EXISTS uso_actual;
ALTER TABLE public.contadores_uso DROP COLUMN IF EXISTS limite_plan;
ALTER TABLE public.contadores_uso DROP COLUMN IF EXISTS fecha_medicion;
ALTER TABLE public.contadores_uso DROP COLUMN IF EXISTS created_at;
ALTER TABLE public.contadores_uso DROP COLUMN IF EXISTS updated_at;
ALTER TABLE public.planes DROP COLUMN IF EXISTS incluye_pos;
ALTER TABLE public.planes DROP COLUMN IF EXISTS incluye_inventario_basico;
ALTER TABLE public.planes DROP COLUMN IF EXISTS incluye_inventario_avanzado;
ALTER TABLE public.planes DROP COLUMN IF EXISTS incluye_promociones;
ALTER TABLE public.planes DROP COLUMN IF EXISTS incluye_reservas;
ALTER TABLE public.planes DROP COLUMN IF EXISTS incluye_arqueo_caja;
ALTER TABLE public.planes DROP COLUMN IF EXISTS incluye_egresos;
ALTER TABLE public.planes DROP COLUMN IF EXISTS incluye_egresos_avanzados;
ALTER TABLE public.planes DROP COLUMN IF EXISTS incluye_reportes_avanzados;
ALTER TABLE public.planes DROP COLUMN IF EXISTS incluye_analytics;
ALTER TABLE public.planes DROP COLUMN IF EXISTS incluye_delivery;
ALTER TABLE public.planes DROP COLUMN IF EXISTS incluye_impresion;
ALTER TABLE public.planes DROP COLUMN IF EXISTS incluye_soporte_24h;
ALTER TABLE public.planes DROP COLUMN IF EXISTS incluye_api;
ALTER TABLE public.planes DROP COLUMN IF EXISTS incluye_white_label;

-- ELIMINAR TABLAS
DROP TABLE IF EXISTS public.contadores_uso;

-- ELIMINAR SECUENCIAS
DROP SEQUENCE IF EXISTS public.contadores_uso_id_contador_seq;

COMMIT;

DO $$
BEGIN
    RAISE NOTICE 'Rollback completado exitosamente en: %', now();
END $$;